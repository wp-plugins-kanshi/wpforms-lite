var WPForms=window.WPForms||{};WPForms.Admin=WPForms.Admin||{},WPForms.Admin.Builder=WPForms.Admin.Builder||{},WPForms.Admin.Builder.WPFormsChoicesJS=WPForms.Admin.Builder.WPFormsChoicesJS||((o,r)=>{let c={setup(e,n,o){let i=r(e),a=i.data("choicesjs");var t,s;return a&&a.destroy(),i.hasClass("choices__input")&&(t=i.closest(".choices"),s=i.detach().removeClass("choices__input").data("choice",null).attr("data-choice",null),t.replaceWith(s),e=(i=t.prevObject)[0]),n.searchEnabled=!0,n.allowHTML=!1,n.searchChoices=null===o.nonce,n.renderChoiceLimit=-1,n.noChoicesText=n.noChoicesText||wpforms_builder.no_pages_found,n.noResultsText=n.noResultsText||wpforms_builder.no_pages_found,a=new Choices(e,n),null!==o.nonce&&(i.data("choicesjs",a),c.setupEvents(i,a,o)),a},setupEvents(i,a,e){let n=a.containerOuter?.element||i.closest(".choices")[0];c.setupSearchEvents(i,a,e),a.passedElement.element.addEventListener("change",function(){var e,n,o=r(this);o.prop("multiple")&&(e=o.data("field-id"),o=o.data("field-name"),n=a.getValue().map(function(e){return e.value}),r(`#wpforms-field-${e}-${o}-select-multiple-options`).val(JSON.stringify(n)))}),n?.addEventListener("click",function(){r(this).hasClass("is-open")&&a.hideDropdown()}),r(o).on("wpformsFieldOptionGroupToggled",function(){wpf.showMoreButtonForChoices(n)}).on("wpformsBeforeFieldDuplicate",function(e,n){if(i.data("field-id")===n){let o=a.getValue(!0);i.data("choicesjs").destroy(),i.find("option").each(function(e,n){o.includes(r(n).val())&&r(n).prop("selected",!0)})}}).on("wpformsFieldDuplicated",function(e,n){i.data("field-id")===n&&i.data("choicesjs").init()})},setupSearchEvents(e,n,o){(n.input?.element||e.nextAll(".choices__input ")[0])?.addEventListener("keyup",function(e){8!==e.which&&46!==e.which||0<e.target.value.length||c.performSearch(n,"",o)}),n.passedElement?.element.addEventListener("search",_.debounce(function(e){0!==n.input.element.value.length&&c.performSearch(n,e.detail.value,o)},800))},performSearch(n,e,o){o.action&&o.nonce&&(c.displayLoading(n),c.ajaxSearch(o.action,e,o.nonce,n.getValue(!0)).done(function(e){n.setChoices(e.data,"value","label",!0)}))},displayLoading(e){e.setChoices([{value:"",label:wpforms_builder.loading+"...",disabled:!0}],"value","label",!0)},ajaxSearchPages(e,n,o){return console.warn("WPForms.Admin.Builder.WPFormsChoicesJS.ajaxSearchPages is deprecated. Use WPForms.Admin.Builder.WPFormsChoicesJS.ajaxSearch instead."),c.ajaxSearch(e,n,o)},ajaxSearch(e,n,o,i=[]){return r.get(wpforms_builder.ajax_url,{action:e,search:n,_wpnonce:o,exclude:i}).fail(function(e){console.error(e)})}};return c})(document,(window,jQuery));